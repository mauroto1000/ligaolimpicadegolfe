{% extends 'base.html' %}

{% block title %}Pirâmide - Liga Olímpica de Golfe{% endblock %}

{% block head %}
<style>
    /* Estilos específicos para a pirâmide alinhada à esquerda */
    .pyramid-container {
        display: flex;
        flex-direction: column;
        align-items: flex-start; /* Alinhamento à esquerda */
        margin: 30px 0;
    }

    .pyramid-row {
        display: flex;
        justify-content: flex-start; /* Alinhamento à esquerda */
        margin-bottom: 6px; /* Aumentado em 20% de 5px */
    }

    .pyramid-cell {
        width: 84px; /* Aumentado em 20% de 70px */
        height: 84px; /* Aumentado em 20% de 70px */
        margin: 0 6px 0 0; /* Aumentado a margem em 20% */
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        color: white;
        border-radius: 0; /* Remover arredondamento */
        text-align: center;
        font-size: 14px; /* Ligeiramente maior para combinar com o tamanho maior */
        font-weight: bold;
        position: relative;
        cursor: pointer;
        padding: 3px; /* Aumentado em proporção */
    }

    /* Cores das células */
    .pyramid-cell {
        background-color: #28a745; /* Verde para todos as células */
    }

    /* Cor de fundo para a primeira coluna */
    .pyramid-cell.first-col {
        background-color: #002970; /* Azul escuro para primeira coluna */
    }

    .player-position {
        position: absolute;
        top: 3px;
        left: 3px;
        font-size: 12px; /* Ligeiramente maior */
        color: #ffffff;
    }

    .player-name {
        font-size: 12px; /* Aumentado para melhor legibilidade no espaço maior */
        text-align: center;
        margin-top: 15px; /* Ajustado proporcionalmente */
        line-height: 1.2;
        max-width: 95%;
        overflow: hidden;
        text-overflow: ellipsis;
    }
</style>
{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header bg-success text-white">
        <h3 class="mb-0">Estrutura da Pirâmide - Liga Olímpica de Golfe 2025</h3>
        <small>Atualizada em 01/03/2025</small>
    </div>
    <div class="card-body">
        <div class="pyramid-container">
            {% for tier_letter, players in tiers %}
                <div class="pyramid-row">
                    <!-- Célula com a letra do tier -->
                    <div class="pyramid-cell first-col">
                        {{ tier_letter }}
                    </div>
                    
                    <!-- Célula para cada posição no tier -->
                    {% for player in players|sort(attribute='position') %}
                        <div class="pyramid-cell" onclick="window.location='{{ url_for('player_detail', player_id=player['id']) }}'">
                            <span class="player-position">{{ player['position'] }}</span>
                            <!-- Mostrar nome completo -->
                            <span class="player-name">{{ player['name'] }}</span>
                            <!-- HCP Index removido conforme solicitado anteriormente -->
                        </div>
                    {% endfor %}
                </div>
            {% endfor %}
        </div>
    </div>
</div>

{% endblock %}