{% extends 'base.html' %}

{% block title %}Pirâmide - Liga Olímpica de Golfe{% endblock %}

{% block head %}
<style>
    /* Estilos específicos para a pirâmide alinhada à esquerda */
    .pyramid-container {
        display: flex;
        flex-direction: column;
        align-items: flex-start; /* Alinhamento à esquerda */
        margin: 30px 0;
    }

    .pyramid-row {
        display: flex;
        justify-content: flex-start; /* Alinhamento à esquerda */
        margin-bottom: 5px;
    }

    .pyramid-cell {
        width: 70px;
        height: 70px;
        margin: 0 5px 0 0; /* Remover margem direita */
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        color: white;
        border-radius: 0; /* Remover arredondamento */
        text-align: center;
        font-size: 13px;
        font-weight: bold;
        position: relative;
        cursor: pointer;
        padding: 2px;
    }

    /* Cores das células */
    .pyramid-cell {
        background-color: #28a745; /* Verde para todos as células */
    }

    /* Cor de fundo para a primeira coluna */
    .pyramid-cell.first-col {
        background-color: #002970; /* Azul escuro para primeira coluna */
    }

    .player-position {
        position: absolute;
        top: 2px;
        left: 2px;
        font-size: 11px;
        color: #ffffff;
    }

    .player-name {
        font-size: 11px;
        text-align: center;
        margin-top: 12px;
        line-height: 1.1;
        max-width: 100%;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .player-hcp {
        position: absolute;
        bottom: 2px;
        right: 2px;
        font-size: 11px;
        color: #ffffff;
    }
</style>
{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header bg-success text-white">
        <h3 class="mb-0">Estrutura da Pirâmide - Liga Olímpica de Golfe 2025</h3>
        <small>Atualizada em 01/03/2025</small>
    </div>
    <div class="card-body">
        <div class="pyramid-container">
            {% for tier_letter, players in tiers %}
                <div class="pyramid-row">
                    <!-- Célula com a letra do tier -->
                    <div class="pyramid-cell first-col">
                        {{ tier_letter }}
                    </div>
                    
                    <!-- Célula para cada posição no tier -->
                    {% for player in players|sort(attribute='position') %}
                        <div class="pyramid-cell" onclick="window.location='{{ url_for('player_detail', player_id=player['id']) }}'">
                            <span class="player-position">{{ player['position'] }}</span>
                            {% set name_parts = player['name'].split() %}
                            {% if name_parts|length > 1 %}
                                <span class="player-name">{{ name_parts[0] }} {{ name_parts[1][0] }}.</span>
                            {% else %}
                                <span class="player-name">{{ player['name'] }}</span>
                            {% endif %}
                            <span class="player-hcp">{{ player['hcp_index'] }}</span>
                        </div>
                    {% endfor %}
                </div>
            {% endfor %}
        </div>
    </div>
</div>

{% endblock %}